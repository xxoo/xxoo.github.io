"use strict";define(function(){var t=Symbol("length"),i=Symbol("selectedColor"),s=Symbol("backgroundColor"),h=Symbol("lineColor"),e=Symbol("cursorColor"),n=Symbol("gridColor"),o=Symbol("rectColor"),r=Symbol("textColor"),a=Symbol("cursorTextColor"),l=Symbol("paiting"),f=Symbol("canvas2d"),c=Symbol("canvas3d"),d=Symbol("gl"),y=Symbol("ground"),m=Symbol("HV"),u=Symbol("MAX"),v=Symbol("COLOR"),p=Symbol("POSITION"),b=Symbol("OFFSET"),g=Symbol("WV"),S=Symbol("X"),O=Symbol("Y"),x=Symbol("paddingX"),I=Symbol("paddingY"),P=Symbol("paddingLeft"),M=Symbol("fontSize"),A=Symbol("oldbegin"),w=Symbol("oldend"),R=Symbol("stage"),C=Symbol("begin"),E=Symbol("end"),L=Symbol("cursor"),T=Symbol("selected"),N=Symbol("max"),B=Symbol("min"),F=Symbol("lines"),X=Symbol("minLen"),j=Symbol("mouseListener");function D(t){this.fixed=!1,this[I]=40,this[x]=60,this[P]=50,this[M]=10,this[i]=[0,0,0],this[s]=[1,1,1],this[h]=[.85,.85,.85],this[e]=[1,.75,.75],this[n]=[.75,.75,1],this[o]=[0,0,0],this[r]=[0,0,0],this[a]=[1,0,0],this[F]={},this[j]=function(t){var i,s=function(t){var s=(i-t.offsetX)%(this[c].clientWidth/(this[E]-this[C]));this.moveCoordBy(Math.round((i-t.offsetX-s)*(this[E]-this[C])/this[c].clientWidth))&&(i=t.offsetX-s)}.bind(this),h=function(t){0===t.button&&(this[c].style.cursor="",this[c].removeEventListener("mousemove",s),this[c].ownerDocument.removeEventListener("mouseup",h),this[c].addEventListener("mousedown",this[j]))}.bind(this);0===t.button&&(i=t.offsetX,this[c].style.cursor="move",this[c].removeEventListener("mousedown",this[j]),this[c].addEventListener("mousemove",s),this[c].ownerDocument.addEventListener("mouseup",h))}.bind(this),this[R]=t.appendChild(document.createElement("div")),this[R].style.width=this[R].style.height="100%",this[R].style.overflow="hidden",this[R].style.position="relative",this[R].addEventListener("contextmenu",function(t){t.preventDefault()}),this[f]=this[R].appendChild(document.createElement("canvas")),this[f].style.display="block",this[f].style.width=this[f].style.height="100%",this[c]=this[R].appendChild(document.createElement("canvas")),this[c].style.position="absolute",this[c].style.left=this[P]+"px",this[c].style.top=this[M]/2+"px",this[c].style.outline="none",this[c].tabIndex=0,this[c].addEventListener("keydown",function(t){37==t.keyCode?(this.moveCoordBy(1),t.preventDefault()):39==t.keyCode?(this.moveCoordBy(-1),t.preventDefault()):38==t.keyCode?(this.zoomCoordBy(-1,t.altKey),t.preventDefault()):40==t.keyCode&&(this.zoomCoordBy(1,t.altKey),t.preventDefault())}.bind(this)),this[c].addEventListener("mousedown",this[j]),this[c].addEventListener("wheel",function(t){var i=Math.abs(t.deltaX),s=Math.abs(t.deltaY);t.preventDefault(),i>s?this.moveCoordBy(Math.round(t.deltaX)):s>i&&this.zoomCoordBy(t.deltaY,t.altKey)}.bind(this)),this[y]=this[f].getContext("2d"),this[d]=this[c].getContext("webgl",{alpha:!1,premultipliedAlpha:!1,antialias:!0,powerPreference:"high-performance",depth:!1,preserveDrawingBuffer:!0});var l=this[d].createShader(this[d].VERTEX_SHADER),A=this[d].createShader(this[d].FRAGMENT_SHADER),w=this[d].createProgram();if(this[d].shaderSource(l,"attribute vec2 POSITION;\n\t\tattribute float WV;\n\t\tattribute float HV;\n\t\tattribute float MAX;\n\t\tattribute float OFFSET;\n\t\tattribute float X;\n\t\tattribute float Y;\n\t\tvoid main(void) {\n\t\t\tif (POSITION.y < 0.0 || POSITION.y >= 0.0) {\n\t\t\t\tgl_Position = vec4((POSITION.x + OFFSET) * 2.0 / WV - 1.0, (POSITION.y - MAX) * 2.0 / HV + 1.0, 0.0, 1.0);\n\t\t\t} else if (X != 0.0) {\n\t\t\t\tgl_Position = vec4(X * 2.0 / WV - 1.0, POSITION.x, 0.0, 1.0);\n\t\t\t} else if (Y != 0.0) {\n\t\t\t\tgl_Position = vec4(POSITION.x, Y * -2.0 + 1.0, 0.0, 1.0);\n\t\t\t} else if (POSITION.x == 1.0) {\n\t\t\t\tgl_Position = vec4(1.0, -1.0, 0.0, 1.0);\n\t\t\t} else if (POSITION.x == 2.0) {\n\t\t\t\tgl_Position = vec4(1.0, 1.0, 0.0, 1.0);\n\t\t\t} else if (POSITION.x == 3.0) {\n\t\t\t\tgl_Position = vec4(-1.0, 1.0, 0.0, 1.0);\n\t\t\t} else {\n\t\t\t\tgl_Position = vec4(-1.0, -1.0, 0.0, 1.0);\n\t\t\t}\n\t\t}"),this[d].shaderSource(A,"uniform lowp vec4 COLOR;\n\t\tvoid main(void) {\n\t\t\tgl_FragColor = COLOR;\n\t\t}"),this[d].compileShader(l),this[d].compileShader(A),this[d].attachShader(w,l),this[d].attachShader(w,A),this[d].linkProgram(w),this[d].useProgram(w),this[p]=this[d].getAttribLocation(w,"POSITION"),this[g]=this[d].getAttribLocation(w,"WV"),this[m]=this[d].getAttribLocation(w,"HV"),this[u]=this[d].getAttribLocation(w,"MAX"),this[b]=this[d].getAttribLocation(w,"OFFSET"),this[S]=this[d].getAttribLocation(w,"X"),this[O]=this[d].getAttribLocation(w,"Y"),this[v]=this[d].getUniformLocation(w,"COLOR"),this[d].bindBuffer(this[d].ARRAY_BUFFER,this[d].createBuffer()),this[d].vertexAttribPointer(this[p],2,this[d].FLOAT,!1,0,0),this[d].enableVertexAttribArray(this[p]),self.ResizeObserver)new ResizeObserver(W.bind(this)).observe(this[R]);else{var L=this[R].insertBefore(document.createElement("iframe"),this[f]);L.style.border="none",L.style.display="block",L.style.position="absolute",L.style.top=L.style.left=0,L.style.width=L.style.height="100%",L.style.visibility="hidden",L.contentWindow.addEventListener("resize",W.bind(this))}W.call(this)}return D.prototype.add=function(t){for(var i in t)if(t[i].data.length>1&&t[i].cursor>=0&&t[i].cursor<t[i].data.length){this[F][i]={data:[],cursor:t[i].cursor,tmax:-Infinity,tmin:Infinity};for(var s=0;s<t[i].data.length;s++)this[F][i].data[s]=(t[i].data[s]-t[i].data[t[i].cursor])/(s<t[i].cursor?t[i].data[s]:t[i].data[t[i].cursor]),(this[F][i].data[s]>1||this[F][i].data[s]<-1)&&(this[F][i].data[s]=Math.cbrt(this[F][i].data[s])),this[F][i].tmax<this[F][i].data[s]&&(this[F][i].tmax=this[F][i].data[s],this[F][i].tmaxi=s),this[F][i].tmin>this[F][i].data[s]&&(this[F][i].tmin=this[F][i].data[s],this[F][i].tmini=s)}V.call(this)},D.prototype.remove=function(t){for(var i,s=0;s<t.length;s++)this[F].hasOwnProperty(t[s])&&(i=!0,delete this[F][t[s]]);if(i)return this[T]&&!this[F].hasOwnProperty(this[T])&&(this[T]=undefined),V.call(this),!0},D.prototype.setCursors=function(t){var i;for(var s in t)this[F].hasOwnProperty(s)&&t[s]!==this[F][s].cursor&&t[s]>=0&&t[s]<this[F][s].data.length&&(this[F][s].cursor=t[s],i=!0);if(i)return V.call(this),!0},D.prototype.setSections=function(t){var i;for(var s in t)this[F].hasOwnProperty(s)&&(this[F][s].starts=t[s].starts,this[F][s].colors=t[s].colors,this[T]===s&&(i=!0));if(i)return Y.call(this),!0},D.prototype.center=function(){var i=Math.ceil((this[E]-this[C])/2),s=this[L]-i,h=this[L]+i;return s<0?(s=0,h=2*this[L]):h>=this[t]&&(h=this[t]-1,s=2*this[L]-h),this.setRange(s,h)},D.prototype.setRange=function(t,i){var s=H.call(this,t,i);if(s[0]!==this[C]||s[1]!==this[E])return this[C]=s[0],this[E]=s[1],Y.call(this),!0},D.prototype.moveCoordBy=function(i){if(this[C]+i<0?i=-this[C]:this[E]+i>this[t]-1&&(i=this[t]-1-this[E]),i)return this[C]+=i,this[E]+=i,Y.call(this),!0},D.prototype.zoomCoordBy=function(i,s){var h,e=this[E]-this[C];if(s&&(i=e*i/100),(h=e+2*Math[i>0?"ceil":"floor"](i/2))<this[X]?h=this[X]:h>this[t]-1&&(h=this[t]-1),h!==e){var n=(h-e)/2;return this[C]-=Math.ceil(n),this[E]+=Math.floor(n),this[C]<0?(this[E]-=this[C],this[C]=0):this[E]>this[t]-1&&(this[C]+=this[t]-1-this[E],this[E]=this[t]-1),Y.call(this),!0}},D.prototype.copy=function(){var t=document.createElement("canvas"),i=t.getContext("2d");return t.width=this[f].width,t.height=this[f].height,i.drawImage(this[f],0,0,this[f].width,this[f].height),this[d].finish(),i.drawImage(this[c],0,0,this[c].width,this[c].height,this[P]*devicePixelRatio,this[M]*devicePixelRatio/2,this[c].width,this[c].height),t},Object.defineProperty(D.prototype,"length",{get:function(){return this[t]}}),Object.defineProperty(D.prototype,"cursor",{get:function(){return this[L]}}),Object.defineProperty(D.prototype,"begin",{get:function(){return this[C]},set:function(t){this.setRange(t,this[E])}}),Object.defineProperty(D.prototype,"end",{get:function(){return this[E]},set:function(t){this.setRange(this[C],t)}}),Object.defineProperty(D.prototype,"selected",{get:function(){return this[T]},set:function(t){if(t=String(t),this[F].hasOwnProperty(t)){if(this[T]===t)return;this[T]=t}else this[T]=undefined;Y.call(this)}}),Object.defineProperty(D.prototype,"paddingY",{get:function(){return this[I]},set:function(t){this[I]=t,Y.call(this)}}),Object.defineProperty(D.prototype,"paddingX",{get:function(){return this[x]},set:function(t){this[x]=t,W.call(this)}}),Object.defineProperty(D.prototype,"paddingLeft",{get:function(){return this[P]},set:function(t){this[P]=t,this[c].style.left=t+"px",W.call(this)}}),Object.defineProperty(D.prototype,"fontSize",{get:function(){return this[M]},set:function(t){this[M]=t,this[c].style.top=t/2+"px",W.call(this)}}),Object.defineProperty(D.prototype,"selectedColor",{get:function(){return this[i]},set:function(t){this[i]=t,Y.call(this)}}),Object.defineProperty(D.prototype,"backgroundColor",{get:function(){return this[s]},set:function(t){this[s]=t,Y.call(this)}}),Object.defineProperty(D.prototype,"lineColor",{get:function(){return this[h]},set:function(t){this[h]=t,Y.call(this)}}),Object.defineProperty(D.prototype,"cursorColor",{get:function(){return this[e]},set:function(t){this[e]=t,Y.call(this)}}),Object.defineProperty(D.prototype,"gridColor",{get:function(){return this[n]},set:function(t){this[n]=t,Y.call(this)}}),Object.defineProperty(D.prototype,"rectColor",{get:function(){return this[o]},set:function(t){this[o]=t,Y.call(this)}}),Object.defineProperty(D.prototype,"textColor",{get:function(){return this[r]},set:function(t){this[r]=t,Y.call(this)}}),Object.defineProperty(D.prototype,"cursorTextColor",{get:function(){return this[a]},set:function(t){this[a]=t,Y.call(this)}}),D;function W(){var t=this[R].clientWidth,i=this[R].clientHeight,s=t-this[P]-this[x]/2,h=i-2*this[M];this[f].width=t*devicePixelRatio,this[f].height=i*devicePixelRatio,this[c].width=s*devicePixelRatio,this[c].height=h*devicePixelRatio,this[c].style.width=s+"px",this[c].style.height=h+"px",this[y].scale(devicePixelRatio,devicePixelRatio),this[d].viewport(0,0,this[c].width,this[c].height),k.call(this),this.setRange(this[C],this[E])||Y.call(this)}function k(){this[X]=Math.min(Math.floor(this[c].clientWidth/this[x]),this[t]-1)}function V(){var i=this[t]=this[L]=0;for(var s in this[F])this[L]<this[F][s].cursor&&(this[L]=this[F][s].cursor),i+=this[F][s].data.length;for(var h in this[F]){this[F][h].offset=this[L]-this[F][h].cursor;var e=this[F][h].offset+this[F][h].data.length;this[t]<e&&(this[t]=e)}var n=new Float32Array(2*i+8);for(var o in n.set([-1,NaN,1,NaN,2,NaN,3,NaN]),i=8,this[F])for(var r=this[F][o],a=0;a<r.data.length;a++)n[i++]=a,n[i++]=r.data[a];this[d].bufferData(this[d].ARRAY_BUFFER,n,this[d].STATIC_DRAW),k.call(this);var l=H.call(this,this[C],this[E]);this[C]=l[0],this[E]=l[1],this[A]=this[w]=undefined,Y.call(this)}function H(i,s){return this[t]>1?[i=Math.max(0,Math.min(i,this[t]-this[X])),Math.max(i+this[X]-1,Math.min(s,this[t]-1))]:[-Infinity,Infinity]}function Y(){this[l]||(this[l]=requestAnimationFrame(function(){var p=this,R=this[C]!==this[A]||this[E]!==this[w];if(this[d].clearColor(this[s][0],this[s][1],this[s][2],1),this[d].clear(this[d].COLOR_BUFFER_BIT|this[d].DEPTH_BUFFER_BIT|this[d].STENCIL_BUFFER_BIT),this[y].clearRect(0,0,this[f].clientWidth,this[f].clientHeight),this[y].font=this[M]+"px monospace",this[t]>1){var X=function(t){var i=t-this[C];Z.push({x:i}),_.push({v:i*G+this[P],text:t-this[L]})},j=function(t,i){Z.push({y:t}),tt.push({v:t*z+this[M]/2,text:Math.round(1e3*(i>1||i<-1?Math.pow(i,3):i))/10+"%"})},D=function(t){for(var i=0;i<t.length;i++)t[i].hasOwnProperty("x")?(this[d].vertexAttrib1f(this[O],0),this[d].vertexAttrib1f(this[S],t[i].x)):(this[d].vertexAttrib1f(this[S],0),this[d].vertexAttrib1f(this[O],t[i].y)),this[d].drawArrays(this[d].LINE_STRIP,0,2)},W=function(t,i){if(i===undefined){var s=this[P]-this[M]/2;this[y].textAlign="right",this[y].textBaseline="middle",this[y].fillStyle=U(this[r]);for(var h=0;h<t.length;h++)h===t.length-1&&this[N]>=0&&this[B]<=0&&(this[y].fillStyle=U(this[a])),this[y].fillText(t[h].text,s,t[h].v)}else{this[y].textAlign="center",this[y].textBaseline="top",this[y].fillStyle=U(this[r]);for(var e=0;e<t.length;e++)e===t.length-1&&this[L]>=this[C]&&this[L]<=this[E]&&(this[y].fillStyle=U(this[a])),this[y].fillText(t[e].text,t[e].v,i)}};if(R){var k=function(t){var i,s,h=p[F][t],e=Math.max(p[C]-h.offset,0),n=Math.min(p[E]-h.offset,h.data.length-1),o=Math.max(p[A]-h.offset,0),r=Math.min(p[w]-h.offset,h.data.length-1);e===o&&n===r||(n>0&&e<h.data.length-1?(h.tmaxi>=e&&h.tmaxi<=n?(h.max=h.tmax,h.maxi=h.tmaxi):i=!0,h.tmini>=e&&h.tmini<=n?(h.min=h.tmin,h.mini=h.tmini):s=!0,(i||s)&&(e>o&&n<r?(i&&(h.maxi<e||h.maxi>n)&&(h.max=-Infinity),s&&(h.mini<e||h.mini>n)&&(h.min=Infinity)):e>o&&e<r?(i&&h.maxi<e&&(h.max=-Infinity),s&&h.mini<e&&(h.min=Infinity),a.call(p,r+1,n,i&&h.max!==-Infinity,s&&h.min!==Infinity)):n>o&&n<r?(i&&h.maxi>n&&(h.max=-Infinity),s&&h.mini>n&&(h.min=Infinity),a.call(p,e,o-1,i&&h.max!==-Infinity,s&&h.min!==Infinity)):e<=o&&n>=r?(a.call(p,e,o-1,i,s),a.call(p,r+1,n,i,s)):(i&&(h.max=-Infinity),s&&(h.min=Infinity)),a.call(p,e,n,h.max===-Infinity,h.min===Infinity))):(h.max=-Infinity,h.min=Infinity,h.maxi=h.mini=NaN));function a(t,i,s,e){if(s&&e)for(var n=t;n<=i;n++){var o=h.data[n];h.max<o&&(h.max=o,h.maxi=n),h.min>o&&(h.min=o,h.mini=n)}else if(s)for(var r=t;r<=i;r++){var a=h.data[r];h.max<a&&(h.max=a,h.maxi=r)}else if(e)for(var l=t;l<=i;l++){var f=h.data[l];h.min>f&&(h.min=f,h.mini=l)}}};for(var V in this[F])k(V);for(var V in this[N]=-Infinity,this[B]=Infinity,this[F]){var H=this[F][V];this[N]<H.max&&(this[N]=H.max),this[B]>H.min&&(this[B]=H.min)}}var Y=this[c].clientWidth,z=this[c].clientHeight,K=this[E]-this[C],q=this[N]-this[B],G=Y/K,J=this[N]/q,Q=Math.ceil(this[x]/G),Z=[],$=[],_=[],tt=[];if(_.push({v:this[P],text:this[C]-this[L]}),_.push({v:Y+this[P],text:this[E]-this[L]}),this[L]>=this[C]&&this[L]<=this[E]){for(var it=Math.floor((this[E]-this[L])/Q),st=(this[E]-this[L])/it,ht=1;ht<it;ht++)X.call(this,this[L]+Math.round(ht*st));it=Math.floor((this[L]-this[C])/Q),st=(this[L]-this[C])/it;for(var et=1;et<it;et++)X.call(this,this[L]-Math.round(et*st));var nt=this[L]-this[C];$.push({x:nt}),_.push({v:nt*G+this[P],text:0})}else for(var ot=Math.floor(Y/this[x]),rt=(this[E]-this[C])/ot,at=1;at<ot;at++)X.call(this,this[L]<this[C]?this[C]+Math.round(at*rt):this[E]-Math.round(at*rt));if(tt.push({v:this[M]/2,text:Math.round(1e3*(this[N]>1||this[N]<-1?Math.pow(this[N],3):this[N]))/10+"%"}),tt.push({v:z+this[M]/2,text:Math.round(1e3*(this[B]>1||this[B]<-1?Math.pow(this[B],3):this[N]))/10+"%"}),this[N]>=0&&this[B]<=0){for(var lt=Math.floor(J*z/this[I]),ft=1;ft<lt;ft++)j.call(this,J-J*ft/lt,this[N]*ft/lt);lt=Math.floor((1-J)*z/this[I]);for(var ct=1;ct<lt;ct++)j.call(this,J+(1-J)*ct/lt,this[B]*ct/lt);0===this[N]?tt.push(tt.shift()):0===this[B]?tt.push(tt.splice(1,1)[0]):($.push({y:J}),tt.push({v:J*z+this[M]/2,text:"0%"}))}else for(var dt=Math.floor(z/this[I]),yt=1;yt<dt;yt++)j.call(this,1-yt/dt,this[B]+(this[N]-this[B])*yt/dt);var mt,ut=4;for(var vt in this[d].vertexAttrib1f(this[g],K),this[d].vertexAttrib1f(this[m],q),this[d].vertexAttrib1f(this[u],this[N]),this[d].uniform4f(this[v],this[h][0],this[h][1],this[h][2],1),this[F]){var pt=this[F][vt];if(vt===this[T])mt=ut;else if(pt.offset<this[E]&&pt.data.length-1>this[C]-pt.offset){var bt=Math.max(this[C]-pt.offset,0);this[d].vertexAttrib1f(this[b],pt.offset-this[C]),this[d].drawArrays(this[d].LINE_STRIP,ut+bt,Math.min(this[E]-pt.offset+1,pt.data.length)-bt)}ut+=pt.data.length}if(this[d].uniform4f(this[v],this[n][0],this[n][1],this[n][2],1),D.call(this,Z),this[d].uniform4f(this[v],this[e][0],this[e][1],this[e][2],1),D.call(this,$),this[T]&&this[F][this[T]].offset<this[E]&&this[F][this[T]].data.length-1>this[C]-this[F][this[T]].offset){var gt=this[F][this[T]],St=Math.max(this[C]-gt.offset,0),Ot=[],xt=[St];if(gt.starts)for(var It=0;It<gt.starts.length;It++)if(gt.starts[It]<=St)Ot[0]=gt.colors[It];else{if(!(gt.starts[It]<this[E]-gt.offset))break;xt.push(gt.starts[It]),Ot.push(gt.colors[It])}Ot.length<xt.length&&Ot.unshift(this[i]);for(var Pt=0;Pt<xt.length;Pt++)this[d].vertexAttrib1f(this[b],gt.offset-this[C]),this[d].uniform4f(this[v],Ot[Pt][0],Ot[Pt][1],Ot[Pt][2],1),this[d].drawArrays(this[d].LINE_STRIP,mt+xt[Pt],(Pt===xt.length-1?Math.min(this[E]-gt.offset+1,gt.data.length):xt[Pt+1]+1)-xt[Pt])}this[d].vertexAttrib1f(this[S],0),this[d].vertexAttrib1f(this[O],0),this[d].uniform4f(this[v],this[o][0],this[o][1],this[o][2],1),this[d].drawArrays(this[d].LINE_LOOP,0,4),W.call(this,_,z+this[M]),W.call(this,tt)}this[l]=0,this[A]=this[C],this[w]=this[E],this.onpaitend&&this.onpaitend({type:"paitend"});R&&this.onrangechange&&this.onrangechange({type:"rangechange"})}.bind(this)),this.onpaitbegin&&this.onpaitbegin({type:"paitbegin"}))}function U(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"}});