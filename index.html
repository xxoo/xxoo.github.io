<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="user-scalable=no, width=device-width" />
	<title>chart2</title>
	<style>
		html {
			height: 100%;
			background-color: #e0e0e0;
		}
		body {
			margin: 0;
			height: 100%;
		}
		#chart{
			position: absolute;
			left: 0;
			right: 200px;
			bottom: 0;
			top: 0;
		}
		#list{
			position: absolute;
			right: 0;
			bottom: 0;
			top: 0;
			width: 200px;
			overflow: auto;
		}
		#list>a {
			display: block;
			font-size: 12px;
			line-height: 24px;
			cursor: pointer;
		}
	</style>
	<script type="text/javascript" src="chart2.js"></script>
	<script type="text/javascript">
		window.onload = function () {
			window.chart = new Chart(document.getElementById('chart'));
			document.getElementById('list').addEventListener('click', function(evt) {
				if (evt.target.nodeName === 'A') {
					if (chart.selected === evt.target.dataset.c) {
						chart.selected = undefined;
						evt.target.style.fontWeight = '';
					} else {
						if (chart.selected) {
							this.querySelector(`a[data-c="${chart.selected}"]`).style.fontWeight = '';
						}
						evt.target.style.fontWeight = 'bold';
						chart.selected = evt.target.dataset.c;
					}
				}
			});
			let t, w = 0;
			chart.onpaitbegin = function () {
				t = Date.now();
			};
			chart.onpaitcancel = function () {
				w += Date.now() - t;
				console.log('canceled');
			};
			chart.onpaitend = function () {
				console.log(Date.now() - t + w);
				w = 0;
			};
			chart.sorting = function (a, b) {
				return a - b;
			};
			chart.xLableing = function (x) {
				return this.indexOrder[x] - this.indexOrder[this.cursor];
			};
			chart.oncursorchange = function() {
				let list = document.getElementById('list'),
					a = this.getValues(),
					s = '';
				if (a) {
					for (let n in a) {
						s += `<a data-c="${n}"${this.selected === n ? ' style="font-weight:bold;"': ''}>line${n}: ${a[n]}</a>`;
					}
				}
				document.getElementById('list').innerHTML = s;
			};
			let a = {},
				total = 10000;
			for (let j = 0; j < 4000; j++) {
				let len = Math.round(total * (Math.random() - Math.random() + 1) / 2),
					start = Math.round((total - len) * (Math.random() - Math.random() + 1) / 2);
				a[j] = {
					[start]: 1000
				};
				for (let i = start + 1; i < len + start; i++) {
					a[j][i] = Math.min(Math.max(Math.round(a[j][i - 1] * (1 + (Math.random() - Math.random()) / 10)), 100),
					10000);
				}
			}
			chart.add(a);
		};
	</script>
</head>

<body><div id="chart"></div><div id="list"></div></body>

</html>