<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="user-scalable=no, width=device-width" />
	<title>chart2</title>
	<style>
		html {
			height: 100%;
			background-color: #e0e0e0;
		}
		body {
			margin: 0;
			height: 100%;
		}
		body>div {
			width: 100%;
			height: 100%;
		}
		body>a {
			position: absolute;
			z-index: 1;
			top: 0;
			right: 0;
		}
	</style>
	<script type="text/javascript" src="chart2.js"></script>
	<script type="text/javascript">
		window.onload = function () {
			window.chart = new Chart(document.body);
			let t, w = 0;
			chart.onpaitbegin = function () {
				t = Date.now();
			};
			chart.onpaitcancel = function () {
				w += Date.now() - t;
				console.log('canceled');
			};
			chart.onpaitend = function () {
				console.log(Date.now() - t + w);
				w = 0;
			};
			chart.sorting = function (a, b) {
				return a - b;
			};
			let a = {},
				total = 10000;
			for (let j = 0; j < 4000; j++) {
				let len = Math.round(total * (Math.random() - Math.random() + 1) / 2),
					start = Math.round((total - len) * (Math.random() - Math.random() + 1) / 2);
				a[j] = {
					[start]: 1000
				};
				for (let i = start + 1; i < len + start; i++) {
					a[j][i] = Math.min(Math.max(Math.round(a[j][i - 1] * (1 + (Math.random() - Math.random()) / 10)), 100),
					10000);
				}
			}
			chart.xLableing = function (x) {
				return this.indexOrder[x] - this.indexOrder[this.cursor];
			};
			chart.add(a);
			chart.selected = 1;
			chart.setRange(chart.index[0], chart.index[chart.index.length - 1]);
			chart.cursor = chart.index[Math.round((chart.index.length - 1) / 2)];
			document.body.firstChild.addEventListener('click', function () {
				this.href = chart.copy().toDataURL();
			});
		};
	</script>
</head>

<body><a download>download</a></body>

</html>